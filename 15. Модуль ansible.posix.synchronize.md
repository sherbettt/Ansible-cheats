[ansible.posix.synchronize module](https://docs.ansible.com/ansible/latest/collections/ansible/posix/synchronize_module.html)

–ú–æ–¥—É–ª—å **`ansible.posix.synchronize`** –≤ Ansible –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –º–µ–∂–¥—É —É–ø—Ä–∞–≤–ª—è—é—â–∏–º —É–∑–ª–æ–º (control node) –∏ —Ü–µ–ª–µ–≤—ã–º–∏ —É–∑–ª–∞–º–∏ (managed nodes) –∏–ª–∏ –º–µ–∂–¥—É —É–¥–∞–ª—ë–Ω–Ω—ã–º–∏ —É–∑–ª–∞–º–∏.  

### üîπ **–î–ª—è –Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏–º –º–æ–¥—É–ª—å**  
–ú–æ–¥—É–ª—å –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –ø–æ—Å—Ç–∞–≤–∫—É Ansible. –û–Ω —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∫–æ–ª–ª–µ–∫—Ü–∏–∏ **`ansible.posix`**, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ:  

```bash
ansible-galaxy collection install ansible.posix
```


### üîπ **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
1. **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫** (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `rsync` –∏–ª–∏ `scp`).  
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ** (—É–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ, –µ—Å–ª–∏ –æ–Ω–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ).  
3. **–†–∞–±–æ—Ç–∞ –≤ push- –∏ pull-—Ä–µ–∂–∏–º–∞—Ö**:  
   - **Push** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äì —Ñ–∞–π–ª—ã –∫–æ–ø–∏—Ä—É—é—Ç—Å—è —Å —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ —É–∑–ª–∞ –Ω–∞ —Ü–µ–ª–µ–≤–æ–π.  
   - **Pull** ‚Äì —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å —Ü–µ–ª–µ–≤–æ–≥–æ —É–∑–ª–∞ –Ω–∞ —É–ø—Ä–∞–≤–ª—è—é—â–∏–π.  
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SSH –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö**.  
5. **–ì–∏–±–∫–æ—Å—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ** (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—ã).  


### üîπ **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```yaml
- name: Synchronize files from control node to remote server
  ansible.posix.synchronize:
    src: /local/path/
    dest: /remote/path/
    delete: yes  # —É–¥–∞–ª—è—Ç—å –ª–∏—à–Ω–∏–µ —Ñ–∞–π–ª—ã –Ω–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ
    recursive: yes  # –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
```

### üîπ **–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä      | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|--------------|-------------------------------------------------------------------------|
| `src`        | –ò—Å—Ç–æ—á–Ω–∏–∫ (–ª–æ–∫–∞–ª—å–Ω—ã–π –∏–ª–∏ —É–¥–∞–ª—ë–Ω–Ω—ã–π –ø—É—Ç—å).                                |
| `dest`       | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ (–∫—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å).                                          |
| `mode`       | –†–µ–∂–∏–º: `push` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ `pull`.                               |
| `delete`     | –£–¥–∞–ª—è—Ç—å –ª–∏ —Ñ–∞–π–ª—ã –≤ `dest`, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ `src` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `no`).    |
| `recursive`  | –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `yes`).                          |
| `archive`    | –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã —Ñ–∞–π–ª–æ–≤ (–∫–∞–∫ –≤ `rsync -a`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `yes`).      |

-------------------------------

–ú–æ–¥—É–ª—å **`ansible.posix.synchronize`** —è–≤–ª—è–µ—Ç—Å—è –æ–±—ë—Ä—Ç–∫–æ–π –≤–æ–∫—Ä—É–≥ **`rsync`** –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –≥–∏–±–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω **–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.  


## üìå **–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**
| –ü–∞—Ä–∞–º–µ—Ç—Ä              | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π? | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------------------|------|--------------|-------------|----------|
| **`src`**            | str  | ‚úÖ –î–∞ | ‚Äî | –ü—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω—ã–º —Ñ–∞–π–ª–∞–º (–ª–æ–∫–∞–ª—å–Ω—ã–π –∏–ª–∏ —É–¥–∞–ª—ë–Ω–Ω—ã–π). |
| **`dest`**           | str  | ‚úÖ –î–∞ | ‚Äî | –ü—É—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (–∫—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å). |
| **`mode`**           | str  | ‚ùå –ù–µ—Ç | `push` | –†–µ–∂–∏–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: `push` (—Å control node –Ω–∞ managed node) –∏–ª–∏ `pull` (—Å managed node –Ω–∞ control node). |
| **`archive`**        | bool | ‚ùå –ù–µ—Ç | `yes` | –ê–Ω–∞–ª–æ–≥ `rsync -a` (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–∞–≤–∞, –≤–ª–∞–¥–µ–ª—å—Ü–∞, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∏ —Å–∏–º–ª–∏–Ω–∫–∏). |
| **`recursive`**      | bool | ‚ùå –ù–µ—Ç | `yes` | –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π. |
| **`delete`**         | bool | ‚ùå –ù–µ—Ç | `no` | –£–¥–∞–ª—è—Ç—å –ª–∏ —Ñ–∞–π–ª—ã –≤ `dest`, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ `src`. |
| **`compress`**       | bool | ‚ùå –ù–µ—Ç | `yes` | –°–∂–∞—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ (`rsync -z`). |
| **`checksum`**       | bool | ‚ùå –ù–µ—Ç | `no` | –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã —Ñ–∞–π–ª–æ–≤ –≤–º–µ—Å—Ç–æ —Ä–∞–∑–º–µ—Ä–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏. |
| **`times`**          | bool | ‚ùå –ù–µ—Ç | `yes` | –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ (`-t` –≤ `rsync`). |
| **`owner`**          | bool | ‚ùå –ù–µ—Ç | `no` | –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ (`-o` –≤ `rsync`). –¢—Ä–µ–±—É–µ—Ç root-–ø—Ä–∞–≤. |
| **`group`**          | bool | ‚ùå –ù–µ—Ç | `no` | –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≥—Ä—É–ø–ø—É (`-g` –≤ `rsync`). –¢—Ä–µ–±—É–µ—Ç root-–ø—Ä–∞–≤. |
| **`links`**          | bool | ‚ùå –ù–µ—Ç | `yes` | –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–∏–º–ª–∏–Ω–∫–∏ –∫–∞–∫ —Å–∏–º–ª–∏–Ω–∫–∏ (`-l` –≤ `rsync`). |
| **`perms`**          | bool | ‚ùå –ù–µ—Ç | `no` | –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–∞–≤–∞ (`-p` –≤ `rsync`). |



## üìå **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**
| –ü–∞—Ä–∞–º–µ—Ç—Ä              | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------------------|------|-------------|----------|
| **`rsync_path`**     | str  | `rsync` | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å –∫ `rsync` –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —É–∑–ª–µ. |
| **`rsync_timeout`**  | int  | `10` | –¢–∞–π–º–∞—É—Ç (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö) –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `rsync`. |
| **`set_remote_user`**| bool | `yes` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `remote_user` –¥–ª—è `rsync` (–µ—Å–ª–∏ `no`, —Ç–æ `ansible_user`). |
| **`use_ssh_args`**   | bool | `no` | –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å SSH-–∞—Ä–≥—É–º–µ–Ω—Ç—ã Ansible –≤ `rsync` (`-e "ssh -o Port=2222"`). |
| **`ssh_args`**       | str  | ‚Äî | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã SSH (–Ω–∞–ø—Ä–∏–º–µ—Ä, `-o StrictHostKeyChecking=no`). |
| **`private_key`**    | str  | ‚Äî | –ü—É—Ç—å –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –∫–ª—é—á—É SSH –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. |
| **`rsync_opts`**     | list | `[]` | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ `rsync` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `--exclude=.git`). |



## üìå **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤**
| –ü–∞—Ä–∞–º–µ—Ç—Ä              | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------------------|------|-------------|----------|
| **`exclude`**        | str/list | ‚Äî | –ò—Å–∫–ª—é—á–∏—Ç—å —Ñ–∞–π–ª—ã/–ø–∞—Ç—Ç–µ—Ä–Ω—ã (–∞–Ω–∞–ª–æ–≥ `--exclude` –≤ `rsync`). |
| **`include`**        | str/list | ‚Äî | –í–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã/–ø–∞—Ç—Ç–µ—Ä–Ω—ã. |
| **`dirs`**           | bool | `yes` | –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–µ—Å–ª–∏ `no`, —Ç–æ —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã). |
| **`copy_links`**     | bool | `no` | –†–∞–∑—ã–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å —Å–∏–º–ª–∏–Ω–∫–∏ (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç). |



## üìå **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
### 1Ô∏è‚É£ –ü—Ä–æ—Å—Ç–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–∞–Ω–∞–ª–æ–≥ `rsync -a`)
```yaml
- name: Sync local dir to remote server
  ansible.posix.synchronize:
    src: /local/files/
    dest: /remote/files/
    delete: yes  # —É–¥–∞–ª—è—Ç—å –ª–∏—à–Ω–∏–µ —Ñ–∞–π–ª—ã
```

### 2Ô∏è‚É£ Pull-—Ä–µ–∂–∏–º (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–∞)
```yaml
- name: Download files from remote server
  ansible.posix.synchronize:
    src: /remote/files/
    dest: /local/backup/
    mode: pull
```

### 3Ô∏è‚É£ –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏ rsync
```yaml
- name: Sync with custom rsync options
  ansible.posix.synchronize:
    src: /app/
    dest: /backup/app/
    rsync_opts:
      - "--exclude=tmp/"
      - "--exclude=*.log"
    compress: no
```

### 4Ô∏è‚É£ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å SSH-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```yaml
- name: Sync using custom SSH port
  ansible.posix.synchronize:
    src: /data/
    dest: /mnt/backup/
    ssh_args: "-o Port=2222"
    private_key: "~/.ssh/custom_key"
```

---

## ‚ùó **–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è**
- –ú–æ–¥—É–ª—å —Ç—Ä–µ–±—É–µ—Ç **—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ `rsync`** –Ω–∞ —É–ø—Ä–∞–≤–ª—è—é—â–µ–º –∏ —Ü–µ–ª–µ–≤–æ–º —É–∑–ª–∞—Ö.
- –î–ª—è —Ä–∞–±–æ—Ç—ã —Å **–≤–ª–∞–¥–µ–ª—å—Ü–µ–º (`owner`) –∏ –≥—Ä—É–ø–ø–æ–π (`group`)** –Ω—É–∂–Ω—ã **root-–ø—Ä–∞–≤–∞**.
- –ï—Å–ª–∏ `dest` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–Ω –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω.
- –ü—Ä–∏ `delete: yes` **—É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ —Ñ–∞–π–ª—ã –≤ `dest`, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ `src`** (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!).

---
