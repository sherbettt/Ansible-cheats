–ß—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç –Ω–∞ **—É–ø—Ä–∞–≤–ª—è–µ–º–æ–º —Ö–æ—Å—Ç–µ** (–Ω–µ –Ω–∞ control node, –∞ –Ω–∞ —Ü–µ–ª–µ–≤–æ–π –º–∞—à–∏–Ω–µ –∏–∑ inventory) —Å –ø–æ–º–æ—â—å—é Ansible, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥—É–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–∫–µ—Ç–∞–º–∏ (`apt`, `yum`, `dnf` –∏ –¥—Ä.) –≤ **ad-hoc –∫–æ–º–∞–Ω–¥–µ** –∏–ª–∏ **–ø–ª–µ–π–±—É–∫–µ**.  

---

## **1. Ad-hoc –∫–æ–º–∞–Ω–¥–∞ (–±—ã—Å—Ç—Ä–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)**
### **–î–ª—è Debian/Ubuntu (APT)**
```bash
ansible <—Ü–µ–ª–µ–≤—ã–µ_—Ö–æ—Å—Ç—ã> -m apt -a "name=<–ø–∞–∫–µ—Ç> state=absent purge=yes" --become
```
- `purge=yes` ‚Äî —É–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.  
- `--become` ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å `sudo`.  

**–ü—Ä–∏–º–µ—Ä:**  
```bash
ansible webservers -m apt -a "name=nginx state=absent purge=yes" --become
```

### **–î–ª—è RHEL/CentOS (YUM/DNF)**
```bash
ansible <—Ü–µ–ª–µ–≤—ã–µ_—Ö–æ—Å—Ç—ã> -m yum -a "name=<–ø–∞–∫–µ—Ç> state=absent" --become
```
**–ü—Ä–∏–º–µ—Ä:**  
```bash
ansible dbservers -m yum -a "name=mysql-server state=absent" --become
```

---

## **2. –ü–ª–µ–π–±—É–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±)**
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `remove-package.yml`:
```yaml
- hosts: <—Ü–µ–ª–µ–≤–∞—è_–≥—Ä—É–ø–ø–∞>  # –ò–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ö–æ—Å—Ç
  become: yes  # sudo
  tasks:
    - name: "–£–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç (Debian/Ubuntu)"
      apt:
        name: "{{ package_name }}"
        state: absent
        purge: yes
      when: ansible_facts['os_family'] == 'Debian'

    - name: "–£–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç (RHEL/CentOS)"
      yum:
        name: "{{ package_name }}"
        state: absent
      when: ansible_facts['os_family'] == 'RedHat'
```

### **–ó–∞–ø—É—Å–∫ –ø–ª–µ–π–±—É–∫–∞**
```bash
ansible-playbook remove-package.yml -e "package_name=nginx"
```
- `-e "package_name=..."` ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ –ø–ª–µ–π–±—É–∫.  

---

## **3. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± (–∞–≤—Ç–æ–≤—ã–±–æ—Ä –ø–∞–∫–µ—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞)**
–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å `package`, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º –≤—ã–±–µ—Ä–µ—Ç –Ω—É–∂–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤:
```yaml
- hosts: all
  become: yes
  tasks:
    - name: "–£–¥–∞–ª–∏—Ç—å –ø–∞–∫–µ—Ç (–∞–≤—Ç–æ–≤—ã–±–æ—Ä –º–µ–Ω–µ–¥–∂–µ—Ä–∞)"
      package:
        name: "nginx"
        state: absent
```

**–ó–∞–ø—É—Å–∫:**
```bash
ansible-playbook remove-package.yml
```

---

## **4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º**
–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ —Ö–æ—Å—Ç—ã –±—É–¥—É—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--check`:
```bash
ansible-playbook remove-package.yml --check
```

---

### **–í—ã–≤–æ–¥—ã**
| –°–ø–æ—Å–æ–± | –ö–æ–º–∞–Ω–¥–∞/–ü–ª–µ–π–±—É–∫ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|--------|----------------|-------------------|
| **Ad-hoc** | `ansible <hosts> -m apt/yum -a "name=... state=absent" --become` | –ë—ã—Å—Ç—Ä–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –±–µ–∑ –ø–ª–µ–π–±—É–∫–∞ |
| **–ü–ª–µ–π–±—É–∫** | `apt`/`yum` –º–æ–¥—É–ª–∏ + `when` | –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–Ω—ã–µ –û–°) |
| **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π** | `package` –º–æ–¥—É–ª—å | –ï—Å–ª–∏ –û–° –∑–∞—Ä–∞–Ω–µ–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞ |

–í—ã–±–∏—Ä–∞–π—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–¥–∞—á–∏! üöÄ
