# Модуль `ansible.builtin.debug`

## Назначение

Модуль `debug` используется для **отладки и вывода информации** во время выполнения playbook. Позволяет просматривать значения переменных, сообщений и результатов выполнения задач.

## Основные параметры (атрибуты)

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|-----------|
| `msg` | string | Нет | Произвольное сообщение для вывода |
| `var` | string | Нет | Имя переменной для вывода (без `{{ }}`) |
| `verbosity` | integer | Нет | Уровень детализации (0-4), при котором задача выполняется |

## Примеры использования

### 1. Простой вывод сообщения

```yaml
- name: Show simple message
  ansible.builtin.debug:
    msg: "Hello, World!"
```

### 2. Вывод переменной с `var`

```yaml
- name: Display variable value
  ansible.builtin.debug:
    var: ansible_hostname
```

### 3. Вывод переменной с `msg`

```yaml
- name: Display variable in message
  ansible.builtin.debug:
    msg: "Hostname is {{ ansible_hostname }}"
```

### 4. Многострочное сообщение

```yaml
- name: Multi-line message
  ansible.builtin.debug:
    msg: |
      This is a multi-line
      debug message
      with line breaks
```

### 5. Вывод зарегистрированной переменной

```yaml
- name: Get file info
  ansible.builtin.stat:
    path: /etc/hosts
  register: file_info

- name: Show file info
  ansible.builtin.debug:
    var: file_info
```

### 6. Вывод конкретного атрибута зарегистрированной переменной

```yaml
- name: Show specific attribute
  ansible.builtin.debug:
    msg: "File size: {{ file_info.stat.size }} bytes"
```

### 7. Использование в цикле

```yaml
- name: Show list items
  ansible.builtin.debug:
    msg: "Item: {{ item }}"
  loop: "{{ my_list }}"
```

### 8. Условный вывод (только при verbose)

```yaml
- name: Verbose debug
  ansible.builtin.debug:
    msg: "Detailed information"
    verbosity: 2
```

### 9. Вывод словаря в цикле

```yaml
- name: Show dictionary items
  ansible.builtin.debug:
    msg: "{{ item.key }} = {{ item.value }}"
  loop: "{{ my_dict | dict2items }}"
```

### 10. Форматированный вывод

```yaml
- name: Formatted output
  ansible.builtin.debug:
    msg: |
      Server: {{ ansible_hostname }}
      IP: {{ ansible_default_ipv4.address }}
      OS: {{ ansible_distribution }} {{ ansible_distribution_version }}
```

## Разница между `msg` и `var`

### Использование `var`:
```yaml
- debug:
    var: my_variable
```
**Выведет:** `"my_variable": "value"`

### Использование `msg`:
```yaml
- debug:
    msg: "Value is {{ my_variable }}"
```
**Выведет:** `"Value is value"`

## Полезные шаблоны

### Вывод всех фактов о хосте:
```yaml
- name: Show all facts
  ansible.builtin.debug:
    var: ansible_facts
```

### Вывод определенного раздела фактов:
```yaml
- name: Show network facts
  ansible.builtin.debug:
    var: ansible_facts.network
```

### Отладка с условием:
```yaml
- name: Debug only when condition is true
  ansible.builtin.debug:
    msg: "Condition is true!"
  when: some_variable == "some_value"
```

### Вывод с фильтрами:
```yaml
- name: Debug with filters
  ansible.builtin.debug:
    msg: |
      Size: {{ file_size | filesizeformat }}
      Date: {{ timestamp | to_datetime | strftime('%Y-%m-%d') }}
      List: {{ my_list | join(', ') }}
```

## Особенности

1. **Не изменяет систему** - только выводит информацию
2. **Работает в check mode** - может использоваться для отладки без изменений
3. **Поддерживает все шаблоны Jinja2** - фильтры, циклы, условия
4. **Полезен для разработки** - помогает понять состояние переменных
5. **Можно отключать** - через `verbosity` или комментирование

## Практическое применение

- Отладка сложных playbook
- Просмотр значений переменных
- Валидация данных перед использованием
- Логирование важных этапов выполнения
- Демонстрация работы playbook

